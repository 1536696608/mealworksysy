{"remainingRequest":"E:\\workmeal\\backfron\\renren-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\workmeal\\backfron\\renren-ui\\src\\utils\\request.js","dependencies":[{"path":"E:\\workmeal\\backfron\\renren-ui\\src\\utils\\request.js","mtime":1685497548837},{"path":"E:\\workmeal\\backfron\\renren-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workmeal\\backfron\\renren-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJFOi93b3JrbWVhbC9iYWNrZnJvbi9yZW5yZW4tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHFzIGZyb20gJ3FzJzsKaW1wb3J0IHsgY2xlYXJMb2dpbkluZm8gfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnbG9kYXNoL2lzUGxhaW5PYmplY3QnOwp2YXIgaHR0cCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogd2luZG93LlNJVEVfQ09ORklHWydhcGlVUkwnXSwKICB0aW1lb3V0OiAxMDAwICogMTgwLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZQp9KTsKLyoqDQogKiDor7fmsYLmi6bmiKoNCiAqLwoKaHR0cC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzWydBY2NlcHQtTGFuZ3VhZ2UnXSA9IENvb2tpZXMuZ2V0KCdsYW5ndWFnZScpIHx8ICd6aC1DTic7CiAgY29uZmlnLmhlYWRlcnNbJ3Rva2VuJ10gPSBDb29raWVzLmdldCgndG9rZW4nKSB8fCAnJzsgLy8g6buY6K6k5Y+C5pWwCgogIHZhciBkZWZhdWx0cyA9IHt9OyAvLyDpmLLmraLnvJPlrZjvvIxHRVTor7fmsYLpu5jorqTluKZfdOWPguaVsAoKICBpZiAoY29uZmlnLm1ldGhvZCA9PT0gJ2dldCcpIHsKICAgIGNvbmZpZy5wYXJhbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZy5wYXJhbXMpLCB7CiAgICAgICdfdCc6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICB9KTsKICB9CgogIGlmIChpc1BsYWluT2JqZWN0KGNvbmZpZy5wYXJhbXMpKSB7CiAgICBjb25maWcucGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0cyksIGNvbmZpZy5wYXJhbXMpOwogIH0KCiAgaWYgKGlzUGxhaW5PYmplY3QoY29uZmlnLmRhdGEpKSB7CiAgICBjb25maWcuZGF0YSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdHMpLCBjb25maWcuZGF0YSk7CgogICAgaWYgKC9eYXBwbGljYXRpb25cL3gtd3d3LWZvcm0tdXJsZW5jb2RlZC8udGVzdChjb25maWcuaGVhZGVyc1snY29udGVudC10eXBlJ10pKSB7CiAgICAgIGNvbmZpZy5kYXRhID0gcXMuc3RyaW5naWZ5KGNvbmZpZy5kYXRhKTsKICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwovKioNCiAqIOWTjeW6lOaLpuaIqg0KICovCgpodHRwLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gNDAxIHx8IHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMTAwMDEpIHsKICAgIGNsZWFyTG9naW5JbmZvKCk7CiAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgIG5hbWU6ICdsb2dpbicKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEubXNnKTsKICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGh0dHA7"},{"version":3,"sources":["E:/workmeal/backfron/renren-ui/src/utils/request.js"],"names":["axios","Cookies","router","qs","clearLoginInfo","isPlainObject","http","create","baseURL","window","SITE_CONFIG","timeout","withCredentials","interceptors","request","use","config","headers","get","defaults","method","params","Date","getTime","data","test","stringify","error","Promise","reject","response","code","replace","name","msg","console"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEC,MAAM,CAACC,WAAP,CAAmB,QAAnB,CADe;AAExBC,EAAAA,OAAO,EAAE,OAAO,GAFQ;AAGxBC,EAAAA,eAAe,EAAE;AAHO,CAAb,CAAb;AAMA;;;;AAGAN,IAAI,CAACO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACC,OAAP,CAAe,iBAAf,IAAoChB,OAAO,CAACiB,GAAR,CAAY,UAAZ,KAA2B,OAA/D;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BhB,OAAO,CAACiB,GAAR,CAAY,OAAZ,KAAwB,EAAlD,CAFsC,CAGtC;;AACA,MAAIC,QAAQ,GAAG,EAAf,CAJsC,CAKtC;;AACA,MAAIH,MAAM,CAACI,MAAP,KAAkB,KAAtB,EAA6B;AAC3BJ,IAAAA,MAAM,CAACK,MAAP,mCACKL,MAAM,CAACK,MADZ,GAEK;AAAE,YAAM,IAAIC,IAAJ,GAAWC,OAAX;AAAR,KAFL;AAID;;AACD,MAAIlB,aAAa,CAACW,MAAM,CAACK,MAAR,CAAjB,EAAkC;AAChCL,IAAAA,MAAM,CAACK,MAAP,mCACKF,QADL,GAEKH,MAAM,CAACK,MAFZ;AAID;;AACD,MAAIhB,aAAa,CAACW,MAAM,CAACQ,IAAR,CAAjB,EAAgC;AAC9BR,IAAAA,MAAM,CAACQ,IAAP,mCACKL,QADL,GAEKH,MAAM,CAACQ,IAFZ;;AAIA,QAAI,sCAAsCC,IAAtC,CAA2CT,MAAM,CAACC,OAAP,CAAe,cAAf,CAA3C,CAAJ,EAAgF;AAC9ED,MAAAA,MAAM,CAACQ,IAAP,GAAcrB,EAAE,CAACuB,SAAH,CAAaV,MAAM,CAACQ,IAApB,CAAd;AACD;AACF;;AACD,SAAOR,MAAP;AACD,CA5BD,EA4BG,UAAAW,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA9BD;AAgCA;;;;AAGArB,IAAI,CAACO,YAAL,CAAkBiB,QAAlB,CAA2Bf,GAA3B,CAA+B,UAAAe,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,GAAvB,IAA8BD,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,KAAzD,EAAgE;AAC9D3B,IAAAA,cAAc;AACdF,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACN,IAAT,CAAcU,GAA7B,CAAP;AACD;;AACD,SAAOJ,QAAP;AACD,CAPD,EAOG,UAAAH,KAAK,EAAI;AACVQ,EAAAA,OAAO,CAACR,KAAR,CAAcA,KAAd;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVD;AAYA,eAAerB,IAAf","sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'js-cookie'\r\nimport router from '@/router'\r\nimport qs from 'qs'\r\nimport { clearLoginInfo } from '@/utils'\r\nimport isPlainObject from 'lodash/isPlainObject'\r\n\r\nconst http = axios.create({\r\n  baseURL: window.SITE_CONFIG['apiURL'],\r\n  timeout: 1000 * 180,\r\n  withCredentials: true\r\n})\r\n\r\n/**\r\n * 请求拦截\r\n */\r\nhttp.interceptors.request.use(config => {\r\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN'\r\n  config.headers['token'] = Cookies.get('token') || ''\r\n  // 默认参数\r\n  var defaults = {}\r\n  // 防止缓存，GET请求默认带_t参数\r\n  if (config.method === 'get') {\r\n    config.params = {\r\n      ...config.params,\r\n      ...{ '_t': new Date().getTime() }\r\n    }\r\n  }\r\n  if (isPlainObject(config.params)) {\r\n    config.params = {\r\n      ...defaults,\r\n      ...config.params\r\n    }\r\n  }\r\n  if (isPlainObject(config.data)) {\r\n    config.data = {\r\n      ...defaults,\r\n      ...config.data\r\n    }\r\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\r\n      config.data = qs.stringify(config.data)\r\n    }\r\n  }\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n/**\r\n * 响应拦截\r\n */\r\nhttp.interceptors.response.use(response => {\r\n  if (response.data.code === 401 || response.data.code === 10001) {\r\n    clearLoginInfo()\r\n    router.replace({ name: 'login' })\r\n    return Promise.reject(response.data.msg)\r\n  }\r\n  return response\r\n}, error => {\r\n  console.error(error)\r\n  return Promise.reject(error)\r\n})\r\n\r\nexport default http\r\n"]}]}